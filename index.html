<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tariff Card Calculator</title>
<style>
    :root{
        --gap:clamp(.5rem,1vw,1.2rem);
        --accent:#2058d0;
        --radius:.5rem;
        --shadow:0 3px 10px rgba(0,0,0,.15);
    }
    body{
        font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
        margin:0;
        padding:var(--gap);
        background:#f7f9fc;
        color:#222;
    }
    h1{margin:.2rem 0 1rem 0;font-size:clamp(1.4rem,2.5vw,2rem);text-align:center}

    .wrapper{max-width:900px;margin-inline:auto;display:flex;flex-direction:column;gap:var(--gap)}
    .card,.inputs{background:#fff;padding:clamp(1rem,2vw,1.5rem);border-radius:var(--radius);box-shadow:var(--shadow)}

    /* ── Inputs ── */
    .inputs{display:grid;gap:var(--gap);grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}
    .field{display:flex;flex-direction:column}
    .field label{margin-bottom:.25rem;font-weight:600}
    .field input{padding:.5rem .6rem;border:1px solid #ccd1d7;border-radius:var(--radius);font-size:1rem}

    /* ── Cards ── */
    .card{display:flex;flex-direction:column;gap:.6rem}
    .card h2{margin:0;font-size:1.25rem;color:var(--accent)}
    .row{display:flex;justify-content:space-between;gap:1rem;font-size:1.05rem}
    @media(max-width:420px){.row{flex-direction:column;gap:.2rem}}

    /* ── Example journeys ── */
    .examples{margin-top:.4rem}
    .examples h3{margin:.1rem 0 .3rem 0;font-size:1.1rem;color:#555}
</style>
</head>
<body>
<h1>Tariff Card Calculator</h1>

<div class="wrapper">
    <!-- user inputs -->
    <div class="inputs">
        <div class="field">
            <label for="flagYardage">Flag&nbsp;yardage (yd)</label>
            <input type="number" id="flagYardage" value="1760" min="1" step="1">
        </div>
        <div class="field">
            <label for="flagPrice">Flag&nbsp;price (£)</label>
            <input type="number" id="flagPrice" value="5.40" min="0" step="0.01">
        </div>
        <div class="field">
            <label for="pricePerYards">Price per&nbsp;yard block (£)</label>
            <input type="number" id="pricePerYards" value="0.20" min="0" step="0.01">
        </div>
        <div class="field">
            <label for="yardBlock">Yard&nbsp;block size (yd)</label>
            <input type="number" id="yardBlock" value="160" min="1" step="1">
        </div>
    </div>

    <div id="results"></div>
</div>

<script>
(() => {
    /* currency formatter */
    const toGBP = v => new Intl.NumberFormat('en-GB',
                     {style:'currency',currency:'GBP'})
                     .format(+v || 0);

    const MILE = 1760;
    const ids = ['flagYardage','flagPrice','pricePerYards','yardBlock'];
    const els = Object.fromEntries(ids.map(id => [id, document.getElementById(id)]));
    const results = document.getElementById('results');

    ids.forEach(id => els[id].addEventListener('input', update));
    update();     // initial render

    function update(){
        const flagYardage = +els.flagYardage.value || 0;   // kept for possible future use
        const flagPrice   = +els.flagPrice.value   || 0;
        const pricePerBlk = +els.pricePerYards.value || 0;
        const yardBlock   = +els.yardBlock.value   || 1;

        const fullTicks  = Math.floor(MILE / yardBlock);   // whole blocks in a mile
        const exactTicks = MILE / yardBlock;               // fractional blocks in a mile

        const tariffs = [
            {title:'Tariff 1', mul:1},
            {title:'Tariff 2', mul:1.5},
            {title:'Tariff 3', mul:2}
        ].map(({title,mul}) => {
            const flag = flagPrice * mul;
            const mileFull = fullTicks * pricePerBlk * mul;      // price per mile (whole ticks)
            const mileExact = exactTicks * pricePerBlk * mul;    // price per mile (exact)

            /* journey examples: total miles 1,2,3,4,5,10            *
             * => extra miles beyond flag: 0,1,2,3,4,9               */
            const extraMilesList = [0,1,2,3,4,9];
            const journeys = extraMilesList.map(extra => ({
                miles: extra + 1,                                      // total miles
                cost: toGBP(flag + extra * mileFull)                   // flag + whole-tick miles
            }));

            return {
                title,
                Flag:                          toGBP(flag),
                'Each mile, full ticks only':  toGBP(mileFull),
                'Each mile, exact':            toGBP(mileExact),
                journeys                       // attach examples
            };
        });

        /* render */
        results.innerHTML = tariffs.map(t => `
            <div class="card">
                <h2>${t.title}</h2>
                ${Object.entries(t).filter(([k])=>k!=='title' && k!=='journeys').map(
                    ([k,v])=>`<div class="row"><span>${k}:</span><span>${v}</span></div>`
                ).join('')}

                <div class="examples">
                    <h3>Journey estimates</h3>
                    ${t.journeys.map(j=>`
                        <div class="row">
                            <span>${j.miles} mile${j.miles>1?'s':''}:</span>
                            <span>${j.cost}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
        `).join('');
    }
})();
</script>
</body>
</html>
